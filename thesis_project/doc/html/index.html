<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Current Monitor API: Current Monitor API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Current Monitor API
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Documentation for current monitoring with PAC1720 sensors</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Current Monitor API </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This API provides access to the PAC1720 current sensors. It allows configuration and query functionality on the sensors. The main interface is the struct <a class="el" href="struct_p_a_c1720__device.html">PAC1720_device</a>. An instance of the struct must be provided to the init function of the API in order to configure the sensor. Two ways for initialization are possible.</p>
<ul>
<li></li>
</ul>
<h1><a class="anchor" id="sec1"></a>
Initialization with settings from sensor</h1>
<p>The first way for an initialization is a call of the function adapter_init_PAC1720_from_field. Here, the configuration stored in the struct instance is overwritten by the settings on the sensor. The values DEV_name_opt, CH_name_opt, DEV_sensor_address, CH_current_sense_resistor_value remain untouched. This is the simplest way to initialize the driver module since all settings are captured from the sensor and only three mandatory settings are rqeuired as shown below:</p>
<p>// Absolute minimum settings required for an initialization: struct <a class="el" href="struct_p_a_c1720__device.html">PAC1720_device</a> dev_FPGA_VCC = { .DEV_sensor_address = 0x4F, .DEV_CH1_conf.CH_current_sense_resistor_value = 0.8f, .DEV_CH2_conf.CH_current_sense_resistor_value = 0.8f, };</p>
<ul>
<li></li>
</ul>
<h1><a class="anchor" id="sec2"></a>
Initialization with settings from struct instance</h1>
<p>The second possibility to initialize the driver module is to provide the struct instance at a call of the function adapter_init_PAC1720_user_defined. This function takes the configuration that is stored in the struct and initializes the sensor with it. Basically can the configuration be made with default values which are almost equal to zero within this context. To achive this, the struct is to be initialized accordingly. The setting of some values has to be different from zero to make the configuration default. The minimum required setting for this way of initialization is depicted in the minimum example. If the configuration of the sensor is to be further adjusted, all other settings can be made in the corresponding instance. The full configuration is shown in the large example. Note that all values are just samples and may be changed to your own needs.</p>
<p>// Minimum settings required for an initialization: struct <a class="el" href="struct_p_a_c1720__device.html">PAC1720_device</a> dev_FPGA_VCC = { .DEV_sensor_address = 0x4F, .DEV_conversion_rate_reg = CONVERSION_DEFAULT, .DEV_CH1_conf.CH_current_sense_resistor_value = 0.8f, .DEV_CH1_conf.CH_current_sense_sampling_time_reg = CURRENT_SAMPLE_TIME_DEFAULT, .DEV_CH1_conf.CH_current_sense_FSR_reg = CURRENT_SENSE_RANGE_DEFAULT, .DEV_CH1_conf.CH_source_voltage_sampling_time_reg = VSRC_SAMPLE_TIME_DEFAULT,</p>
<p>.DEV_CH2_conf.CH_current_sense_resistor_value = 0.8f, .DEV_CH2_conf.CH_current_sense_sampling_time_reg = CURRENT_SAMPLE_TIME_DEFAULT, .DEV_CH2_conf.CH_current_sense_FSR_reg = CURRENT_SENSE_RANGE_DEFAULT, .DEV_CH2_conf.CH_source_voltage_sampling_time_reg = VSRC_SAMPLE_TIME_DEFAULT, };</p>
<p>// All possible configuration settings: struct <a class="el" href="struct_p_a_c1720__device.html">PAC1720_device</a> dev_USB_MON = { .DEV_name_opt = "device_identifier", .DEV_sensor_address = 0x4D, .DEV_configuration_reg = CONFIG_ALL_CH_ENABLED, .DEV_conversion_rate_reg = CONVERSION_CONTINIOUS, .DEV_one_shot_reg = ONE_SHOT_DEFAULT, .DEV_mask_reg = MASK_ALL_CH_ALERT_ASSERT,</p>
<p>.DEV_CH1_conf.CH_name_opt = "channel1_identifier", .DEV_CH1_conf.CH_current_sense_resistor_value = 0.15f, .DEV_CH1_conf.CH_current_sense_sampling_time_reg = CURRENT_SAMPLE_TIME_2ms5, .DEV_CH1_conf.CH_current_sense_sampling_average_reg = SAMPLE_AVERAGING_DISABLED, .DEV_CH1_conf.CH_current_sense_FSR_reg = CURRENT_SENSE_RANGE_20mV, .DEV_CH1_conf.CH_current_sense_high_limit_reg = CURRENT_SENSE_HIGH_LIMIT_DEFAULT, .DEV_CH1_conf.CH_current_sense_low_limit_reg = CURRENT_SENSE_LOW_LIMIT_DEFAULT, .DEV_CH1_conf.CH_source_voltage_sampling_time_reg = VSRC_SAMPLE_TIME_2ms5, .DEV_CH1_conf.CH_source_voltage_sampling_average_reg = SAMPLE_AVERAGING_DISABLED, .DEV_CH1_conf.CH_source_voltage_high_limit_reg = SOURCE_VOLTAGE_HIGH_LIMIT_DEFAULT, .DEV_CH1_conf.CH_source_voltage_low_limit_reg = SOURCE_VOLTAGE_LOW_LIMIT_DEFAULT,</p>
<p>.DEV_CH2_conf.CH_name_opt = "channel2_identifier", .DEV_CH2_conf.CH_current_sense_resistor_value = 0.8f, .DEV_CH2_conf.CH_current_sense_sampling_time_reg = CURRENT_SAMPLE_TIME_2ms5, .DEV_CH2_conf.CH_current_sense_sampling_average_reg = SAMPLE_AVERAGING_DISABLED, .DEV_CH2_conf.CH_current_sense_FSR_reg = CURRENT_SENSE_RANGE_20mV, .DEV_CH2_conf.CH_current_sense_high_limit_reg = CURRENT_SENSE_HIGH_LIMIT_DEFAULT, .DEV_CH2_conf.CH_current_sense_low_limit_reg = CURRENT_SENSE_LOW_LIMIT_DEFAULT, .DEV_CH2_conf.CH_source_voltage_sampling_time_reg = VSRC_SAMPLE_TIME_2ms5, .DEV_CH2_conf.CH_source_voltage_sampling_average_reg = SAMPLE_AVERAGING_DISABLED, .DEV_CH2_conf.CH_source_voltage_high_limit_reg = SOURCE_VOLTAGE_HIGH_LIMIT_DEFAULT, .DEV_CH2_conf.CH_source_voltage_low_limit_reg = SOURCE_VOLTAGE_LOW_LIMIT_DEFAULT, };</p>
<h1><a class="anchor" id="sec2"></a>
Initialization with settings from struct instance</h1>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
